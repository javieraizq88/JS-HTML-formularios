<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        contenido_textarea = ""
        num_caracteres_permitidos = 10

        function valida_longitud() {
            num_caracteres = document.forms[0].texto.value.length

            if (num_caracteres > num_caracteres_permitidos) {
                document.forms[0].texto.value = contenido_textarea
            } else {
                contenido_textarea = document.forms[0].texto.value
            }
            // textarea llegue a la longitud máxima permitida el campo de texto que lleva la cuenta de los caracteres se ponga de color rojo
            if (num_caracteres >= num_caracteres_permitidos) {
                document.forms[0].caracteres.style.color = "#ff0000";
            } else {
                document.forms[0].caracteres.style.color = "#000000";
            }

            cuenta()
        }
        // actualiza el campo de texto, colocando el número de caracteres escritos en el textarea.
        function cuenta() {
            document.forms[0].caracteres.value = document.forms[0].texto.value.length
        }
    </script>


</head>

<body>
    <form action="#" method="post">
        <table>
            <tr>
                <td>Texto:</td>
                <td><textarea cols="40" rows="5" name="texto" onKeyDown="valida_longitud()"
                        onKeyUp="valida_longitud()"></textarea></td>
            </tr>
            <tr>
                <td>Caracteres:</td>
                <td><input type="text" name=caracteres size=4></td>
            </tr>
        </table>
    </form>
</body>

</html>